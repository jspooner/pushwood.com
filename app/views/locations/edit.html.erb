
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
<style type="text/css" media="screen">
	#edit_map {width:400px;height:400px;}
</style>

<h1>Editing location</h1>

<%= render 'form' %>

<%= link_to 'Show', @location %> |
<%= link_to 'Back', locations_path %>

<script type="text/javascript" charset="utf-8">
$(document).ready(function() {
	var myOptions = {
	    zoom: 20,
			streetViewControl: false,
	    mapTypeId: google.maps.MapTypeId.HYBRID
	  };
	var myLatlng = new google.maps.LatLng(<%= @location.lat %>,<%= @location.lng %>);
	myOptions.center = myLatlng;
	var map     = new google.maps.Map(document.getElementById("edit_map"), myOptions);
	var marker  = new google.maps.Marker({ map: map,	draggable: true, position: myLatlng });
	//
	/**
	* watch the markers position
	*/
	var lat     = $("#location_lat");
	var lng     = $("#location_lng");
	var marker_to_lat_listener = google.maps.event.addListener(marker, 'position_changed', function() {
		lat.val(marker.getPosition().lat());
		lng.val(marker.getPosition().lng());
	});
	
});

</script>